<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/diagnose-activation.ps1">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/diagnose-activation.ps1" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="# JetBrains Activation Diagnostic Script&#10;# Checks common activation issues and provides fixes&#10;&#10;Write-Host &quot;`n╔══════════════════════════════════════════════════════════════════╗&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║     JETBRAINS ACTIVATION DIAGNOSTIC TOOL                        ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;╚══════════════════════════════════════════════════════════════════╝`n&quot; -ForegroundColor Cyan&#10;&#10;$issues = @()&#10;$fixes = @()&#10;&#10;# Test 1: Network connectivity to brucege.com&#10;Write-Host &quot; Testing network access to brucege.com...&quot; -ForegroundColor Yellow&#10;try {&#10;    $ping = Test-Connection -ComputerName brucege.com -Count 2 -ErrorAction SilentlyContinue&#10;    if ($ping) {&#10;        Write-Host &quot;   ✅ brucege.com is accessible&quot; -ForegroundColor Green&#10;    } else {&#10;        throw &quot;Cannot reach brucege.com&quot;&#10;    }&#10;} catch {&#10;    Write-Host &quot;   ❌ Cannot access brucege.com&quot; -ForegroundColor Red&#10;    $issues += &quot;Network access to brucege.com blocked&quot;&#10;    $fixes += &quot;1. Check firewall/VPN settings`n2. Try offline activation (see docs/JETBRAINS_ACTIVATION_GUIDE.md)&quot;&#10;}&#10;&#10;# Test 2: Check for ja-netfilter&#10;Write-Host &quot;`n Checking for ja-netfilter installation...&quot; -ForegroundColor Yellow&#10;$jaNetfilterPaths = @(&#10;    &quot;$env:USERPROFILE\.ja-netfilter&quot;,&#10;    &quot;C:\Program Files\ja-netfilter&quot;,&#10;    &quot;C:\Program Files (x86)\ja-netfilter&quot;&#10;)&#10;&#10;$foundJaNetfilter = $false&#10;foreach ($jaPath in $jaNetfilterPaths) {&#10;    if (Test-Path $jaPath) {&#10;        $foundJaNetfilter = $true&#10;        Write-Host &quot;   ⚠️  ja-netfilter found at: $jaPath&quot; -ForegroundColor Yellow&#10;&#10;        # Check dns.conf&#10;        $dnsConf = Join-Path $jaPath &quot;config\dns.conf&quot;&#10;        if (Test-Path $dnsConf) {&#10;            $dnsContent = Get-Content $dnsConf -Raw&#10;            if ($dnsContent -match &quot;equal brucege.com&quot;) {&#10;                Write-Host &quot;   ❌ dns.conf contains blocking rule for brucege.com&quot; -ForegroundColor Red&#10;                $issues += &quot;ja-netfilter blocking brucege.com&quot;&#10;                $fixes += &quot;Edit $dnsConf and DELETE the line: equal brucege.com&quot;&#10;            } else {&#10;                Write-Host &quot;   ✅ dns.conf does not block brucege.com&quot; -ForegroundColor Green&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;if (-not $foundJaNetfilter) {&#10;    Write-Host &quot;   ✅ ja-netfilter not detected&quot; -ForegroundColor Green&#10;}&#10;&#10;# Test 3: Check JetBrains IDE installation&#10;Write-Host &quot;`n Checking JetBrains IDE installations...&quot; -ForegroundColor Yellow&#10;$jetbrainsApps = @()&#10;$programFiles = @(&quot;$env:ProgramFiles\JetBrains&quot;, &quot;${env:ProgramFiles(x86)}\JetBrains&quot;, &quot;$env:LOCALAPPDATA\Programs\JetBrains&quot;)&#10;&#10;foreach ($pf in $programFiles) {&#10;    if (Test-Path $pf) {&#10;        $apps = Get-ChildItem -Path $pf -Directory -ErrorAction SilentlyContinue&#10;        $jetbrainsApps += $apps&#10;    }&#10;}&#10;&#10;if ($jetbrainsApps.Count -gt 0) {&#10;    Write-Host &quot;   ✅ Found JetBrains IDEs:&quot; -ForegroundColor Green&#10;    $jetbrainsApps | ForEach-Object { Write-Host &quot;      - $($_.Name)&quot; -ForegroundColor Gray }&#10;} else {&#10;    Write-Host &quot;   ⚠️  No JetBrains IDEs detected&quot; -ForegroundColor Yellow&#10;}&#10;&#10;# Test 4: Check for common IDE config locations&#10;Write-Host &quot;`n Checking IDE configuration...&quot; -ForegroundColor Yellow&#10;$configPaths = @(&#10;    &quot;$env:APPDATA\JetBrains&quot;,&#10;    &quot;$env:LOCALAPPDATA\JetBrains&quot;&#10;)&#10;&#10;$foundConfigs = $false&#10;foreach ($confPath in $configPaths) {&#10;    if (Test-Path $confPath) {&#10;        $foundConfigs = $true&#10;        $configs = Get-ChildItem -Path $confPath -Directory -ErrorAction SilentlyContinue&#10;        if ($configs) {&#10;            Write-Host &quot;   ✅ IDE configs found at: $confPath&quot; -ForegroundColor Green&#10;&#10;            # Check for recent IDE versions&#10;            $recent = $configs | Where-Object { $_.Name -match &quot;202[4-5]&quot; }&#10;            if ($recent) {&#10;                Write-Host &quot;      Recent versions detected:&quot; -ForegroundColor Gray&#10;                $recent | Select-Object -First 3 | ForEach-Object {&#10;                    Write-Host &quot;      - $($_.Name)&quot; -ForegroundColor Gray&#10;                }&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;if (-not $foundConfigs) {&#10;    Write-Host &quot;   ⚠️  No IDE configuration directories found&quot; -ForegroundColor Yellow&#10;}&#10;&#10;# Test 5: Check DNS resolution&#10;Write-Host &quot;`n Testing DNS resolution...&quot; -ForegroundColor Yellow&#10;try {&#10;    $dnsResult = Resolve-DnsName -Name brucege.com -ErrorAction SilentlyContinue&#10;    if ($dnsResult) {&#10;        Write-Host &quot;   ✅ DNS resolution successful&quot; -ForegroundColor Green&#10;        Write-Host &quot;      IP: $($dnsResult[0].IPAddress)&quot; -ForegroundColor Gray&#10;    } else {&#10;        throw &quot;DNS resolution failed&quot;&#10;    }&#10;} catch {&#10;    Write-Host &quot;   ❌ DNS resolution failed&quot; -ForegroundColor Red&#10;    $issues += &quot;DNS cannot resolve brucege.com&quot;&#10;    $fixes += &quot;1. Check DNS settings`n2. Try flushing DNS: ipconfig /flushdns`n3. Use offline activation&quot;&#10;}&#10;&#10;# Test 6: Check MCP configuration&#10;Write-Host &quot;`n Checking MCP configuration...&quot; -ForegroundColor Yellow&#10;$mcpConfigPath = &quot;$env:LOCALAPPDATA\github-copilot\intellij\mcp.json&quot;&#10;if (Test-Path $mcpConfigPath) {&#10;    Write-Host &quot;   ✅ MCP config found&quot; -ForegroundColor Green&#10;    try {&#10;        $mcpConfig = Get-Content $mcpConfigPath -Raw | ConvertFrom-Json&#10;        if ($mcpConfig.mcpServers.'scarmonit-architecture') {&#10;            Write-Host &quot;   ✅ Scarmonit MCP server configured&quot; -ForegroundColor Green&#10;        } else {&#10;            Write-Host &quot;   ⚠️  Scarmonit MCP server not in config&quot; -ForegroundColor Yellow&#10;        }&#10;    } catch {&#10;        Write-Host &quot;   ⚠️  Could not parse MCP config&quot; -ForegroundColor Yellow&#10;    }&#10;} else {&#10;    Write-Host &quot;   ℹ️  MCP config not found (may be created on first use)&quot; -ForegroundColor Gray&#10;}&#10;&#10;# Summary&#10;Write-Host &quot;`n╔══════════════════════════════════════════════════════════════════╗&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║     DIAGNOSTIC SUMMARY                                           ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;╚══════════════════════════════════════════════════════════════════╝`n&quot; -ForegroundColor Cyan&#10;&#10;if ($issues.Count -eq 0) {&#10;    Write-Host &quot;✅ No activation issues detected!&quot; -ForegroundColor Green&#10;    Write-Host &quot;`nℹ️  If you're still having activation problems:&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;   1. Update plugin to latest version&quot; -ForegroundColor White&#10;    Write-Host &quot;   2. Restart IDE and retry activation&quot; -ForegroundColor White&#10;    Write-Host &quot;   3. Contact support: WeChat gejun12311&quot; -ForegroundColor White&#10;} else {&#10;    Write-Host &quot;❌ Found $($issues.Count) issue(s):&quot; -ForegroundColor Red&#10;    for ($i = 0; $i -lt $issues.Count; $i++) {&#10;        Write-Host &quot;`n$($i + 1). $($issues[$i])&quot; -ForegroundColor Yellow&#10;        Write-Host &quot;   Fix: $($fixes[$i])&quot; -ForegroundColor White&#10;    }&#10;}&#10;&#10;Write-Host &quot;`n Documentation:&quot; -ForegroundColor Cyan&#10;Write-Host &quot;   Full Guide: docs\JETBRAINS_ACTIVATION_GUIDE.md&quot; -ForegroundColor White&#10;&#10;Write-Host &quot;`n Support:&quot; -ForegroundColor Cyan&#10;Write-Host &quot;   WeChat: gejun12311&quot; -ForegroundColor White&#10;Write-Host &quot;   QQ Group: 575733084&quot; -ForegroundColor White&#10;&#10;Write-Host &quot;`n Quick Actions:&quot; -ForegroundColor Cyan&#10;Write-Host &quot;   [1] Open activation guide&quot; -ForegroundColor White&#10;Write-Host &quot;   [2] Test MCP server&quot; -ForegroundColor White&#10;Write-Host &quot;   [3] Exit`n&quot; -ForegroundColor White&#10;&#10;$choice = Read-Host &quot;Select action (1-3)&quot;&#10;switch ($choice) {&#10;    &quot;1&quot; {&#10;        $guidePath = &quot;docs\JETBRAINS_ACTIVATION_GUIDE.md&quot;&#10;        if (Test-Path $guidePath) {&#10;            Start-Process notepad.exe -ArgumentList $guidePath&#10;        } else {&#10;            Write-Host &quot;Guide not found at: $guidePath&quot; -ForegroundColor Red&#10;        }&#10;    }&#10;    &quot;2&quot; {&#10;        Write-Host &quot;`nTesting MCP server...&quot; -ForegroundColor Yellow&#10;        $mcpServerPath = &quot;mcp-server\index.js&quot;&#10;        if (Test-Path $mcpServerPath) {&#10;            node $mcpServerPath&#10;        } else {&#10;            Write-Host &quot;MCP server not found at: $mcpServerPath&quot; -ForegroundColor Red&#10;        }&#10;    }&#10;    &quot;3&quot; {&#10;        Write-Host &quot;Exiting...&quot; -ForegroundColor Gray&#10;    }&#10;    default {&#10;        Write-Host &quot;Invalid choice&quot; -ForegroundColor Red&#10;    }&#10;}&#10;&#10;Write-Host &quot;&quot;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/docs/JETBRAINS_ACTIVATION_GUIDE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/docs/JETBRAINS_ACTIVATION_GUIDE.md" />
              <option name="updatedContent" value="# JetBrains Plugin Activation &amp; Troubleshooting Guide&#10;&#10;## ⚠️ Common Activation Issues&#10;&#10;This guide covers troubleshooting for JetBrains IDE plugin activation issues, including ja-netfilter compatibility and network access problems.&#10;&#10;---&#10;&#10;##  Issue 1: Activation Fails (Corrupted Data or DnsFilter.testQuery Error)&#10;&#10;### Symptoms&#10;- Activation fails with corrupted data message&#10;- `DnsFilter.testQuery` error appears&#10;- License verification cannot complete&#10;&#10;### Solution Steps&#10;&#10;**Step 1: Update Plugin**&#10;```&#10;1. Open JetBrains IDE (IntelliJ/WebStorm/PyCharm)&#10;2. Go to Settings → Plugins&#10;3. Find the plugin and click &quot;Update&quot;&#10;4. Restart IDE&#10;```&#10;&#10;**Step 2: Retry Activation**&#10;```&#10;1. Go to Help → Register&#10;2. Enter your activation code&#10;3. Click &quot;Activate&quot;&#10;```&#10;&#10;**Step 3: Contact Support (if still failing)**&#10;- **WeChat:** gejun12311&#10;- **QQ Group:** 575733084&#10;- Provide error details and activation code&#10;&#10;---&#10;&#10;## ️ Issue 2: ja-netfilter Compatibility Problem&#10;&#10;### Background&#10;- ja-netfilter versions ≥ 20220701 block `brucege.com`&#10;- This prevents license verification from completing&#10;- Affects plugin activation and validation&#10;&#10;### Detection&#10;Check if you have ja-netfilter installed:&#10;```bash&#10;# Windows&#10;dir /s ja-netfilter&#10;&#10;# Mac/Linux&#10;find ~ -name &quot;ja-netfilter&quot; -type d&#10;```&#10;&#10;### Solution A: Fix DNS Configuration (Recommended)&#10;&#10;**Step 1: Locate Config File**&#10;```&#10;ja-netfilter/config/dns.conf&#10;```&#10;&#10;**Step 2: Edit dns.conf**&#10;Open the file and **DELETE** this line:&#10;```&#10;equal brucege.com&#10;```&#10;&#10;**Step 3: Save and Restart IDE**&#10;&#10;### Solution B: Downgrade Plugin (Alternative)&#10;&#10;If DNS fix doesn't work:&#10;```&#10;1. Uninstall current plugin version&#10;2. Download plugin version 3.3.1&#10;3. Install manually: Settings → Plugins → ⚙️ → Install Plugin from Disk&#10;4. Retry activation&#10;```&#10;&#10;### Verification&#10;After fix, test access:&#10;```bash&#10;# Windows PowerShell&#10;Test-Connection brucege.com -Count 2&#10;&#10;# Mac/Linux&#10;ping -c 2 brucege.com&#10;```&#10;&#10;Expected: Should resolve and respond&#10;&#10;---&#10;&#10;##  Issue 3: Cannot Access brucege.com&#10;&#10;### Symptoms&#10;- Network timeout when activating&#10;- DNS resolution fails&#10;- Firewall/VPN blocking access&#10;&#10;### Quick Network Test&#10;```bash&#10;# Windows&#10;nslookup brucege.com&#10;ping brucege.com&#10;&#10;# Mac/Linux&#10;dig brucege.com&#10;curl -I https://brucege.com&#10;```&#10;&#10;### Solution: Offline Activation&#10;&#10;**Step 1: Get Unique Code**&#10;```&#10;1. Open JetBrains IDE&#10;2. Go to Help → Register&#10;3. Select &quot;Offline Activation&quot;&#10;4. Copy the unique code displayed&#10;```&#10;&#10;**Step 2: Contact Support**&#10;- **WeChat:** gejun12311&#10;- **QQ Group:** 575733084&#10;&#10;**Provide:**&#10;1. Your unique offline activation code&#10;2. Your purchased online activation code&#10;3. IDE version and OS details&#10;&#10;**Step 3: Apply Offline License**&#10;```&#10;1. Receive offline license file from support&#10;2. Go to Help → Register&#10;3. Select &quot;License file&quot;&#10;4. Browse and select the received file&#10;5. Click &quot;Activate&quot;&#10;```&#10;&#10;---&#10;&#10;##  Issue 4: Mac &quot;Permission Denied&quot; Error&#10;&#10;### Symptoms&#10;- &quot;Permission denied&quot; when activating&#10;- Cannot write to config directory&#10;- Activation settings not saved&#10;&#10;### Solution: Fix Permissions&#10;&#10;**Step 1: Navigate to Home**&#10;```bash&#10;cd ~&#10;```&#10;&#10;**Step 2: Fix Config Permissions**&#10;```bash&#10;sudo chmod 777 .config&#10;```&#10;&#10;**Step 3: Verify**&#10;```bash&#10;ls -la | grep .config&#10;# Should show: drwxrwxrwx&#10;```&#10;&#10;**Step 4: Retry Activation**&#10;```&#10;1. Restart JetBrains IDE&#10;2. Go to Help → Register&#10;3. Enter activation code&#10;4. Click &quot;Activate&quot;&#10;```&#10;&#10;### Alternative: Reset Config (if above fails)&#10;```bash&#10;# Backup existing config&#10;mv ~/.config ~/.config.backup&#10;&#10;# Create fresh config directory&#10;mkdir ~/.config&#10;chmod 755 ~/.config&#10;&#10;# Restart IDE and retry&#10;```&#10;&#10;---&#10;&#10;##  Troubleshooting Checklist&#10;&#10;Before contacting support, verify:&#10;&#10;- [ ] Plugin is updated to latest version&#10;- [ ] JetBrains IDE is updated to latest version&#10;- [ ] Internet connection is stable&#10;- [ ] No VPN/proxy blocking brucege.com&#10;- [ ] Firewall allows IDE network access&#10;- [ ] ja-netfilter DNS config doesn't block brucege.com&#10;- [ ] Config directory has correct permissions (Mac)&#10;- [ ] Activation code is valid and not expired&#10;&#10;---&#10;&#10;##  Support Channels&#10;&#10;### Primary Support&#10;- **WeChat:** gejun12311&#10;- **QQ Group:** 575733084&#10;&#10;### When Contacting Support, Include:&#10;1. **IDE Details:**&#10;   - Product (IntelliJ/WebStorm/PyCharm/etc.)&#10;   - Version number&#10;   - OS (Windows/Mac/Linux + version)&#10;&#10;2. **Error Details:**&#10;   - Exact error message&#10;   - Screenshot if possible&#10;   - When error occurs (during activation/at startup/etc.)&#10;&#10;3. **Activation Info:**&#10;   - Online activation code (if applicable)&#10;   - Offline unique code (for offline activation)&#10;&#10;4. **Environment:**&#10;   - ja-netfilter version (if installed)&#10;   - Network setup (VPN/proxy/firewall)&#10;   - Previous activation attempts&#10;&#10;---&#10;&#10;##  Advanced Diagnostics&#10;&#10;### Check IDE Logs&#10;```&#10;Help → Show Log in Explorer/Finder&#10;```&#10;Look for:&#10;- `DnsFilter` errors&#10;- `brucege.com` connection failures&#10;- `Permission denied` messages&#10;&#10;### Test Network Access&#10;```bash&#10;# Windows PowerShell&#10;Test-NetConnection brucege.com -Port 443&#10;&#10;# Mac/Linux&#10;nc -zv brucege.com 443&#10;telnet brucege.com 443&#10;```&#10;&#10;### Verify ja-netfilter Status&#10;```bash&#10;# Check if ja-netfilter is active&#10;# Look for VM options in IDE Help → Edit Custom VM Options&#10;# Should see: -javaagent:/path/to/ja-netfilter.jar&#10;```&#10;&#10;---&#10;&#10;## ✅ Post-Activation Verification&#10;&#10;After successful activation:&#10;&#10;1. **Check License Status:**&#10;   ```&#10;   Help → About&#10;   # Should show license valid until &lt;date&gt;&#10;   ```&#10;&#10;2. **Verify Features:**&#10;   - Premium features are enabled&#10;   - No trial/evaluation banners&#10;   - All plugins functional&#10;&#10;3. **Test MCP Integration:**&#10;   ```&#10;   # In Copilot Chat&#10;   Run MCP tool list_agents&#10;   # Should return agent list without errors&#10;   ```&#10;&#10;---&#10;&#10;##  Re-Activation After System Changes&#10;&#10;If license becomes invalid after:&#10;- OS reinstall&#10;- Hardware changes&#10;- IDE upgrade&#10;&#10;**Steps:**&#10;1. Deactivate old license (if possible)&#10;2. Follow activation steps again&#10;3. Use same activation code&#10;4. Contact support if code is rejected&#10;&#10;---&#10;&#10;##  Known Issues &amp; Workarounds&#10;&#10;### Issue: Activation Works but MCP Tools Don't Load&#10;**Fix:**&#10;```bash&#10;# Restart MCP server&#10;.\mcp-server\restart-mcp.ps1&#10;&#10;# Restart IDE&#10;# Verify: Run MCP tool list_agents&#10;```&#10;&#10;### Issue: Activation Code &quot;Already Used&quot;&#10;**Fix:**&#10;- Contact support via WeChat: gejun12311&#10;- Provide proof of purchase&#10;- Request code reset&#10;&#10;### Issue: License Valid but Shows as Trial&#10;**Fix:**&#10;```&#10;1. Help → Register → Manage Licenses&#10;2. Remove all licenses&#10;3. Restart IDE&#10;4. Reactivate with code&#10;```&#10;&#10;---&#10;&#10;## ️ Preventive Measures&#10;&#10;### Before Installing ja-netfilter:&#10;1. Check version compatibility&#10;2. Backup existing IDE settings&#10;3. Test activation before applying ja-netfilter&#10;&#10;### Regular Maintenance:&#10;1. Keep IDE updated&#10;2. Keep plugins updated&#10;3. Backup license files/codes&#10;4. Monitor license expiration dates&#10;&#10;### Network Configuration:&#10;1. Whitelist brucege.com in firewall&#10;2. Exclude from VPN routing (if causing issues)&#10;3. Add to antivirus exceptions if needed&#10;&#10;---&#10;&#10;##  Quick Support Reference&#10;&#10;| Issue | Solution | Support Contact |&#10;|-------|----------|-----------------|&#10;| Activation fails | Update plugin + retry | WeChat: gejun12311 |&#10;| ja-netfilter blocking | Edit dns.conf | QQ: 575733084 |&#10;| Cannot access brucege.com | Offline activation | WeChat: gejun12311 |&#10;| Mac permission denied | `sudo chmod 777 .config` | - |&#10;| Code already used | Contact support | WeChat: gejun12311 |&#10;&#10;---&#10;&#10;**Last Updated:** November 29, 2025  &#10;**Compatibility:** JetBrains IDEs 2024.x - 2025.x  &#10;**Support Hours:** Check QQ Group for availability&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>